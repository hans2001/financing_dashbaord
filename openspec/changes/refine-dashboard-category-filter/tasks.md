## 1. Implementation
- [ ] 1.1 Introduce a shadcn/ui-inspired `CategorySelector` component (popover trigger + checkbox grid) that renders every snapshot category inside the filters tray without depending on the table’s currently shown rows.
- [ ] 1.2 Wire `CategorySelector` into `FilterTray`, replacing the old tag grid, and ensure the selector toggles `categoryFilters` state while keeping the button height/width aligned with the other controls; closing the popover should be handled by the shadcn primitives (click outside, escape) rather than form submission.
- [ ] 1.3 Keep feeding the snapshot array from `useCategorySnapshot`/`useDashboardState` so `categoryOptions` continues to include all normalized labels for the selected accounts/date range; ensure the selector uses that list verbatim.
- [ ] 1.4 Ensure clearing all chips resets `categoryFilters` to `[]` and the selector trigger reverts to “All categories”, and that the existing requests already handle repeated `category` params (per spec).
- [ ] 1.5 Add unit tests for the new `CategorySelector` (open state, checkbox toggles, reflection of selections) and refresh any filter-related tests that rely on category controls, then run the relevant suites to prove the UI is responsive.
